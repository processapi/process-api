<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="app/styles/application.css" />
		<title>Document</title>
	</head>
	<body>
		<main></main>

		<script type="module">
			import { ProcessApi } from "/src/main.js";
			import { RouterModule } from "./src/modules/router.js";
			import { ViewLoaderModule } from "./src/modules/view-loader.js";
			import { ComponentModule } from "./src/modules/component.js";
			import { MessagingModule } from "./src/modules/messaging.js";
			import { routes } from "./app/routes.js";

			const mainElement = document.querySelector("main");

			globalThis.api = new ProcessApi();
			api.register(RouterModule);
			api.register(ViewLoaderModule);
			api.register(ComponentModule);
			api.register(MessagingModule);

			api.call("router", "init", { routes });
			api.call("view_loader", "set_container", { container: mainElement });
			api.call("view_loader", "listen");
		</script>
	</body>
</html>
